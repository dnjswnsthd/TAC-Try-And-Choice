<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.service.tac.model.mapper.CategoryMapper">

	<resultMap type="LargeCategory" id="largeCategory">
		<id column="large_category_id" property="largeCategoryId" />
		<result column="large_category_name" property="largeCategoryName" />
	</resultMap>
	
	<resultMap type="SmallCategory" id="smallCategory">
		<id column="small_category_id" property="smallCategoryId" />
		<result column="small_category_name" property="smallCategoryName" />
		<result column="large_category_id" property="largeCategoryId" />
	</resultMap>
	
	<resultMap type="CardDetail" id="cardDetail">
		<id column="card_detail_id" property="cardDetailId" />
		<result column="discount_percent" property="discountPercent" />
		<result column="card_id" property="cardId" />
		<result column="large_category_id" property="largeCategoryId" />
		<result column="small_category_id" property="smallCategoryId" />
		<result column="min_payment" property="minPayment" />
		<result column="max_discount" property="maxDiscount" />
		<result column="max_count" property="maxCount" />
	</resultMap>
	
	<insert id="insertL" parameterType="largeCategory">
		<selectKey keyProperty="large_category_id" resultType="int" order="BEFORE">
			SELECT large_category_seq.nextVal FROM dual
		</selectKey>
			INSERT INTO large_category(large_category_id, large_category_name)
			VALUES (#{large_category_id}, #{large_category_name})
	</insert>
	
	<!-- Get Large Category -->
	<select id="getAllLargeCategory" resultMap="largeCategory">
		select large_category_id, large_category_name, large_category_image
		from large_category
	</select>
	
	<!-- Get Small Category By Large Category Id -->
	<select id="getSmallCategory" parameterType="int" resultMap="smallCategory">
		select small_category_id, small_category_name, large_category_id
		from small_category
		where large_category_id = ${id}
	</select>
	
	
</mapper>